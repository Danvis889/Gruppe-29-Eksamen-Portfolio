---
title: "Begralveser i Nakskov"
author: "Daniel Vistrup Icuspit Sørensen, Annesofie Stilling Lorentzen, Julie Dichmann Christensen"
date: "2025-05-19"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

## Importing the data from a csv

First, I have to access tidyverse in Rstudio to ensure that all the proper tools needed to analyze and refine the data is available. Then, I must import the data sheet (as a csv), with some slight alterations to make the data presentable. In addition, I must also include the information that "NA" is to be registered as "NULL" by Rstudio. It should be noted that the removal of column 9, was generated by RStudio itself, when I wanted to remove a blank column that kept appearing whenever I tried to have Rstudio read

```{r cars}
library(tidyverse)
begrav <- read_csv("data/perlestikker - Sheet1.csv", 
                                col_types = cols(...9 = col_skip()),
                   na = "NULL")
head(begrav)
```

## Including a column of dates based on numeric values:
In order to create an accurate plot of the dates of every burial across the two years, I must use the available data to create a new column, where the data is registered as dates in Rstudio.

```{r}
begrav$dato <- make_date(day = begrav$dag, month = begrav$måned, year = begrav$år)
head(begrav$dato)
```
## Making factors for plotting
Another important aspect about the data is its character. For many parts of the data such as gender, age category, and burial location, these values are expressed as character or numeric, which cannot be plotted in Rstudio. Therefore, I change the character of the data into a factor which allows for the data to be put into a data plot. In addition, I use the unique function to analyze the various categories that the data may fall under. For example, the metadata of køn/gender is represented by either "mand", "kvinde", or "NA".

```{r}
class(begrav$år)
begrav$år <- factor(begrav$år)
class(begrav$år)

class(begrav$køn)
unique(begrav$køn)
begrav$køn <- factor(begrav$køn)
class(begrav$køn)

class(begrav$aldersgruppe)
unique(begrav$aldersgruppe)
begrav$aldersgruppe <- factor(begrav$aldersgruppe)
class(begrav$aldersgruppe)

class(begrav$sted)
unique(begrav$sted)
begrav$sted <- factor(begrav$sted)
class(begrav$sted)
```

## Filtering by the year
Another aspect in the analysis of the Perlestikkebogen is the difference between the two years selected for analysis, 1619 and 1620. Therefore, I must filter the data based on the years of 1619 and 1620 and create two new data frames as global environments in Rstudio. In addition, I altered the data in the index column of 1620 by subtracting 132 from every value. This is to ensure that the plotting of burials in the year 1620 start does not start at a high number and instead represent only the total number of burials in 1620.

```{r}
str(begrav$dato)
bg_1619 <- filter(begrav, format(begrav$dato, "%Y") == "1619")
bg_1620 <- filter(begrav, format(begrav$dato, "%Y") == "1620")
bg_1620$begrav_index <- bg_1620$begrav_index - 132

head(bg_1619)
head(bg_1620)
```

## Including Plots
Now, with the data refined and tidied, I can begin the plotting of the data. In the first step, I plot the dates of all burials over 1619, 1620, and both years in a sort of timeline. In addition, I also plotted the number of burials based on each year.

```{r pressure, echo=TRUE}
plot(begrav$dato,begrav$begrav_index,
     main = "Timeline",
     xlab = "Date",
     ylab = "Burials")

plot(bg_1619$dato,bg_1619$begrav_index,
     main = "Timeline (1619)",
     xlab = "Date",
     ylab = "Burials")

plot(bg_1620$dato, bg_1620$begrav_index,
     main = "Timeline (1620)",
     xlab = "Date",
     ylab = "Burials")

plot(begrav$år)
```

Next, I plot the various aspects of the burials in general, such as gender, age and location.
```{r}
plot(begrav$køn)
plot(begrav$aldersgruppe)
plot(begrav$sted)
```

I repeat this process, but instead focus exclusively on the burials in the year 1619.
```{r}
plot(bg_1619$køn)
plot(bg_1619$aldersgruppe)
plot(bg_1619$sted)
```

Finally, I analyze the data based on aspects in burials in 1620.
```{r}
plot(bg_1620$køn)
plot(bg_1620$aldersgruppe)
plot(bg_1620$sted)
```

